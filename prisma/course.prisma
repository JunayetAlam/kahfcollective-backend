model Course {
    id String @id @default(auto()) @map("_id") @db.ObjectId

    title        String
    description  String
    status       CourseStatus @default(ACTIVE)
    language     String
    isDeleted    Boolean      @default(false)
    instructorId String       @db.ObjectId

    forums          Forum[]
    courseContents  CourseContents[]
    instructor      User             @relation(fields: [instructorId], references: [id])
    completeCourses CompleteCourse[]
    enrollCourses   EnrollCourse[]
    groupId         String           @db.ObjectId

    group Group @relation(fields: [groupId], references: [id])

    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt

    @@map("courses")
}

model CompleteCourse {
    id       String @id @default(auto()) @map("_id") @db.ObjectId
    courseId String @db.ObjectId
    userId   String @db.ObjectId

    course Course @relation(fields: [courseId], references: [id])
    user   User   @relation(fields: [userId], references: [id])

    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt

    @@unique([courseId, userId])
    @@map("complete_courses")
}

enum CourseStatus {
    DRAFT
    ACTIVE
    HIDDEN
}
